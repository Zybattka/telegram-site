<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="styles/style.css">

</head>
<body>


<div id="products">
  <div class="product">
    <span class="counter"></span> <!--элемент счетчика.-->
    <img src="images/image1.png" alt="Товар 1">
    <h3>Товар 1</h3>
    <p>Цена: $10</p>
    <button class="btn add-to-cart" data-price="10">Добавить в корзину</button>
  </div>

  <div class="product">
    <span class="counter"></span> <!--элемент счетчика.-->
    <img src="images/image2.png" alt="Товар 2">
    <h3>Товар 2</h3>
    <p>Цена: $20</p>
    <button class="btn add-to-cart" data-price="20">Добавить в корзину</button>
  </div>
  <div class="product">
    <span class="counter"></span> <!--элемент счетчика.-->
    <img src="images/image3.png" alt="Товар 3">
    <h3>Товар 3</h3>
    <p>Цена: $30</p>
    <button class="btn add-to-cart" data-price="30">Добавить в корзину</button>
  </div>

  <div class="product">
    <span class="counter"></span> <!--элемент счетчика.-->
    <img src="images/image4.png" alt="Товар 4">
    <h3>Товар 4</h3>
    <p>Цена: $35</p>
    <button class="btn add-to-cart" data-price="30">Добавить в корзину</button>
  </div>

  <div class="product">
    <span class="counter"></span> <!--элемент счетчика.-->
    <img src="images/image5.png" alt="Товар 5">
    <h3>Товар 5</h3>
    <p>Цена: $40</p>
    <button class="btn add-to-cart" data-price="30">Добавить в корзину</button>
  </div>

  <div class="product">
    <span class="counter"></span> <!--элемент счетчика.-->
    <img src="images/image6.png" alt="Товар 6">
    <h3>Товар 6</h3>
    <p>Цена: $39</p>
    <button class="btn add-to-cart" data-price="30">Добавить в корзину</button>
  </div>

  <!-- Дополнительные товары ... -->

</div>

<div class="cart">
  <h2>Корзина</h2>
  <div id="cart-items"></div>
  <p id="total-price">Суммарная цена: $0</p>
  <button class="btn" onclick="checkout()">Оплатить</button>
  <button class="btn" onclick="continueShopping()">Вернуться к покупкам</button>
</div>

<script>
  function updateCounter() {
    var counterElements = document.getElementsByClassName("counter");

    for (var i = 0; i < counterElements.length; i++) {
      var product = counterElements[i].parentNode;
      var count = 0;

      for (var j = 0; j < cartItems.length; j++) {
        if (cartItems[j].name === product.querySelector("h3").textContent) {
          count++;
        }
      }

      counterElements[i].textContent = count;
    }
  }

  var cartItems = [];
  function updateCart() {
    var cartItemsDiv = document.getElementById("cart-items");
    cartItemsDiv.innerHTML = "";

    for (var i = 0; i < cartItems.length; i++) {
      var item = cartItems[i];
      var itemDiv = document.createElement("div");
      itemDiv.innerHTML = "<img src='" + item.image + "' alt='" + item.name + "'><h4>" + item.name + "</h4><p>Цена: $" + item.price + "</p>";
      var removeButton = document.createElement("button");
      removeButton.className = "btn remove-from-cart";
      removeButton.textContent = "Удалить из корзины";
      removeButton.setAttribute("data-index", i);
      removeButton.addEventListener("click", removeFromCart);
      itemDiv.appendChild(removeButton);
      cartItemsDiv.appendChild(itemDiv);
      updateCounter()
    }

    var totalPrice = 0;
    for (var i = 0; i < cartItems.length; i++) {
      totalPrice += cartItems[i].price;
    }
    document.getElementById("total-price").textContent = "Суммарная цена: $" + totalPrice;
  }

  function addToCart(event) {
    var button = event.target;
    var price = parseFloat(button.getAttribute("data-price"));
    var name = button.parentNode.querySelector("h3").textContent;
    var image = button.parentNode.querySelector("img").getAttribute("src");
    cartItems.push({ name: name, price: price, image: image });

    updateCart();
    updateCounter()
  }

  function removeFromCart(event) {
    var button = event.target;
    var itemIndex = parseInt(button.getAttribute("data-index"));
    cartItems.splice(itemIndex, 1);
    updateCart();
    updateCounter()
  }
  function checkout() {
    // Здесь можно добавить код для обработки оплаты
    alert("Оплата прошла успешно!");
    cartItems = [];
    updateCounter()
    updateCart();
  }

  function continueShopping() {
    document.getElementById("cart-items").innerHTML = "";
    cartItems = [];
    updateCart();

  }

  var addToCartButtons = document.getElementsByClassName("add-to-cart");
  for (var i = 0; i < addToCartButtons.length; i++) {
    addToCartButtons[i].addEventListener("click", addToCart);
  }

  var removeFromCartButtons = document.getElementsByClassName("remove-from-cart");
  for (var i = 0; i < removeFromCartButtons.length; i++) {
    removeFromCartButtons[i].addEventListener("click", removeFromCart);
  }
</script>
</body>
</html>